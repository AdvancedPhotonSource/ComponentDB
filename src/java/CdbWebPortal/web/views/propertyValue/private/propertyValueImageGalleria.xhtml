<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"    
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <ui:param name="entityTypeName" value="#{entityController.entityTypeName}"/>
    
    <div class="actionButton">
        <p:commandButton id="#{entityTypeName}PropertyAddImagesCommandButton" 
                         value="Add"
                         icon="ui-icon-plus"
                         oncomplete="PF('propertyValueMultipleImageUploadDialogWidget').show()"
                         rendered="#{loginController.loggedInAsAdmin or (loginController.loggedIn and entityController.entityCanBeCreatedByUsers())}">
            <f:setPropertyActionListener target="#{propertyValueImageUploadBean.cdbEntityController}"
                                         value="#{entityController}" />
             <p:tooltip for="#{entityTypeName}PropertyAddImagesCommandButton" value="Add Images to #{entityTypeName}."/>
        </p:commandButton>
    </div>

    <p:galleria id="#{entityTypeName}PropertyImageGalleria"
                value="#{entityController.imageList}" var="propertyValueObject" 
                showCaption="false"
                panelHeight="300" panelWidth="450"
                effect="slide"
                rendered="#{entityController.displayImages}"
                styleClass="propertyValueImageGalleria">
        
        <p:graphicImage value="/propertyValue/images/#{propertyValueObject.value}.scaled" 
                        alt="#{propertyValueObject.description}" 
                        title="#{propertyValueObject.value}"
                        height="300"
                        onclick="window.open('#{propertyValueController.getOriginalImageApplicationPath(propertyValueObject)}')"/>
        
    </p:galleria>
    
    <ui:include src="propertyValueMultipleImageUploadDialog.xhtml" />
    
</ui:composition>


