<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:param name="breadcrumb" value="#{designElementController.currentViewId}"/>
    <ui:param name="designObject" value="#{designController.current}"/>
    <p:treeTable id="designElementListTreeTable"
                 widgetVar="designElementListTreeTableWidget" 
                 value="#{designElementListTreeViewBean.createRootNodeForDesign(designObject)}"
                 var="designElementObject"
                 emptyMessage="No design elements found.">

        <p:column sortBy="#{designElementObject.name}" headerText="Element Name">
            <h:outputLink value="../designElement/view.xhtml?id=#{designElementObject.id}&amp;breadcrumb=#{breadcrumb}" title="Design Element: #{designElementObject.name}">
                <h:outputText value="#{designElementObject.name}"/>
            </h:outputLink>
        </p:column>

        <p:column sortBy="#{designElementObject.id}" headerText="Id"
                  rendered="#{designElementController.displayId}">
            <h:outputText value="#{designElementObject.id}"/>
        </p:column>

        <p:column sortBy="#{designElementObject.containedObjectType}" headerText="Element Type">
            <h:outputText value="#{designElementObject.containedObjectType}"/>
        </p:column>

        <p:column sortBy="#{designElementObject.containedObjectComponentType}" headerText="Component Type"
                  rendered="#{designElementController.displayComponentType}">
            <h:outputLink value="../componentType/view.xhtml?id=#{designElementObject.containedObjectComponentType.id}&amp;breadcrumb=#{breadcrumb}" title="Component Type: #{designElementObject.component.componentType.name}">
                <h:outputText value="#{designElementObject.containedObjectComponentType}"/>
            </h:outputLink>
        </p:column>
        
        <p:column sortBy="#{designElementObject.containedObjectName}" headerText="Component | Design">
            <h:outputLink value="../#{designElementObject.containedObjectType}/view.xhtml?id=#{designElementObject.containedObjectId}&amp;breadcrumb=#{breadcrumb}" title="View #{designElementObject.containedObjectType} details">
                <h:outputText value="#{designElementObject.containedObjectName}"/>
            </h:outputLink>  
        </p:column>

        <p:column sortBy="#{designElementObject.location.name}" headerText="Location"
                  rendered="#{designElementController.displayLocation}">
            <h:outputText value="#{designElementObject.location.name}"/>
        </p:column>

        <p:column sortBy="#{designElementObject.description}" headerText="Description"
                  rendered="#{designElementController.displayDescription}">
            <h:outputText value="#{designElementObject.description}"/>
        </p:column>

        <p:column sortBy="#{designElementObject.sortOrder}" headerText="Sort Order"
                  rendered="#{designElementController.displaySortOrder}">
            <h:outputText value="#{designElementObject.sortOrder}"/>
        </p:column>

        <ui:include src="../entityInfo/entityInfoListObject.xhtml">
            <ui:param name="entityController" value="#{designElementController}"/>
            <ui:param name="entityInfoObject" value="#{designElementObject.entityInfo}"/>
        </ui:include>
    </p:treeTable>

</ui:composition>
